DROP TABLE CLIENTE;
CREATE TABLE CLIENTE
(
    CODIGO          NUMBER          NOT NULL,
    NOME            VARCHAR2(60)    NOT NULL,
    RUA             VARCHAR2(80)    NOT NULL,
    NR              NUMBER(4)       NOT NULL,
    BAIRRO          VARCHAR2(50)    NOT NULL,
    COMPLEMENTO     VARCHAR2(100)   NULL,
    CIDADE          VARCHAR2(50)    NOT NULL,
    UF              VARCHAR2(2)     NOT NULL,
    CEP             VARCHAR2(10)    NOT NULL,
    CONSTRAINT PK_CLIENTE PRIMARY KEY (CODIGO)
);

DROP TABLE PF;
CREATE TABLE PF
(
    CODIGO_CLI      NUMBER          NOT NULL,
    CNPF            VARCHAR2(14)    NOT NULL,
    RG              VARCHAR2(10)    NOT NULL,
    DATA_NASCIMENTO DATE            NOT NULL,
    CONSTRAINT PK_PF PRIMARY KEY (CODIGO_CLI),
    CONSTRAINT FK_CLIENTE_PF FOREIGN KEY (CODIGO_CLI) REFERENCES CLIENTE (CODIGO)
);

DROP TABLE PJ;
CREATE TABLE PJ
(
    CODIGO_CLI      NUMBER          NOT NULL,
    CNPJ            VARCHAR2(19)    NOT NULL,
    IE              VARCHAR2(10)    NOT NULL,
    NOME_FANTASIA   VARCHAR2(60)    NOT NULL,
    CONSTRAINT PK_PJ PRIMARY KEY (CODIGO_CLI),
    CONSTRAINT FK_CLIENTE_PJ FOREIGN KEY (CODIGO_CLI) REFERENCES CLIENTE (CODIGO)
);

DROP TABLE PRODUTO;
CREATE TABLE PRODUTO
(
    CODIGO          NUMBER          NOT NULL,
    DESCRICAO       VARCHAR2(80)    NOT NULL,
    UNID_MEDIDA     VARCHAR2(10)    NOT NULL,
    CONSTRAINT PK_PRODUTO PRIMARY KEY (CODIGO)
);

DROP TABLE VENDEDOR;
CREATE TABLE VENDEDOR
(
    MATRICULA       NUMBER          NOT NULL,
    NOME            VARCHAR2(60)    NOT NULL,
    CNPF            VARCHAR2(14)    NOT NULL,
    CONSTRAINT PK_VENDEDOR PRIMARY KEY (MATRICULA)
);

DROP TABLE FONE_CLIENTE;
CREATE TABLE FONE_CLIENTE
(
    NUMERO          VARCHAR2(14)    NOT NULL,
    CODIGO_CLI      NUMBER          NOT NULL,
    CONSTRAINT PK_FONE_CLIENTE PRIMARY KEY (NUMERO, CODIGO_CLI),
    CONSTRAINT FK_FONE_CLIENTE FOREIGN KEY (CODIGO_CLI) REFERENCES CLIENTE (CODIGO)
);

DROP TABLE FONE_VENDEDOR;
CREATE TABLE FONE_VENDEDOR
(
    NUMERO          VARCHAR2(14)    NOT NULL,
    MATRICULA_VEN   NUMBER          NOT NULL,
    CONSTRAINT PK_FONE_VENDEDOR PRIMARY KEY (NUMERO, MATRICULA_VEN),
    CONSTRAINT FK_FONE_VENDEDOR FOREIGN KEY (MATRICULA_VEN) REFERENCES VENDEDOR (MATRICULA)
);

CREATE TABLE PRATELEIRA
(
    CODIGO          NUMBER(3)       NOT NULL,
    DESCRICAO       VARCHAR2(50)    NOT NULL,
    NUMERO_SECOES   NUMBER(2)       NOT NULL,
    CONSTRAINT PK_PRATELEIRA PRIMARY KEY (CODIGO)
);


DROP TABLE PEDIDO CASCADE CONSTRAINT;

CREATE TABLE PEDIDO (
NUMERO          NUMBER(6) NOT NULL,
DATA            DATE NOT NULL,
PRAZO_ENTREGA   DATE NOT NULL,
RUA             VARCHAR2(80),
NR              NUMBER(4),
BAIRRO          VARCHAR2(50),
COMPLEMENTO     VARCHAR2(100),
CIDADE          VARCHAR2(50),
UF              VARCHAR2(2),
CEP             VARCHAR(10),
TOTAL_FATURA    NUMBER(8,2),
CODIGO_CLI      NUMBER,
MATRICULA_VEN   NUMBER
);

ALTER TABLE PEDIDO 
ADD CONSTRAINT PK_PEDIDO PRIMARY KEY (NUMERO);
ALTER TABLE PEDIDO 
ADD CONSTRAINT FK_PED_CLIENTE FOREIGN KEY (CODIGO_CLI) REFERENCES CLIENTE (CODIGO);
ALTER TABLE PEDIDO
ADD CONSTRAINT FK_PED_VENDEDOR FOREIGN KEY (MATRICULA_VEN) REFERENCES VENDEDOR (MATRICULA);

--TABELA ESTOQUE
DROP TABLE ESTOQUE CASCADE CONSTRAINT;

CREATE TABLE ESTOQUE (
DATA_ENTRADA    DATE,
CODIGO_PRO      NUMBER,
CODIGO_PRA      NUMBER(3),
QUANTIDADE      NUMBER(5) NOT NULL,
DATA_VALIDADE   DATE
);

ALTER TABLE ESTOQUE
ADD CONSTRAINT PK_ESTOQUE PRIMARY KEY (DATA_ENTRADA,CODIGO_PRO, CODIGO_PRA);
ALTER TABLE ESTOQUE
ADD CONSTRAINT FK_EST_PRODUTO FOREIGN KEY (CODIGO_PRO) REFERENCES PRODUTO (CODIGO);
ALTER TABLE ESTOQUE
ADD CONSTRAINT FK_EST_PRATELEIRA FOREIGN KEY (CODIGO_PRA) REFERENCES PRATELEIRA (CODIGO);


--TABELA CAPACIDADE_ESTOQUE
DROP TABLE CAPACIDADE_ESTOQUE CASCADE CONSTRAINT;

CREATE TABLE CAPACIDADE_ESTOQUE (
CODIGO_PRO        NUMBER,
CODIGO_PRA        NUMBER(3),
QUANTIDADE        NUMBER(5)
);

ALTER TABLE CAPACIDADE_ESTOQUE
ADD CONSTRAINT PK_CAPACIDADE_ESTOQUE PRIMARY KEY (CODIGO_PRO, CODIGO_PRA);

ALTER TABLE CAPACIDADE_ESTOQUE
ADD CONSTRAINT FK_CAP_EST_PRODUTO FOREIGN KEY (CODIGO_PRO) REFERENCES PRODUTO (CODIGO);

ALTER TABLE CAPACIDADE_ESTOQUE
ADD CONSTRAINT FK_CAP_EST_PRATELEIRA FOREIGN KEY (CODIGO_PRA) REFERENCES PRATELEIRA (CODIGO);

DROP TABLE ITEM_PRODUTO;
CREATE TABLE ITEM_PRODUTO 
(
CODIGO_PRO          NUMBER,
NUMERO_PED          NUMBER(6),
QUANTIDADE          NUMBER(5),
PRECO_UNITARIO      NUMBER(5,2),
VALOR_ITEM          NUMBER(7,2)
);

ALTER TABLE ITEM_PRODUTO 
ADD CONSTRAINT PK_ITEM_PRODUTO PRIMARY KEY (CODIGO_PRO, NUMERO_PED);

ALTER TABLE ITEM_PRODUTO
ADD CONSTRAINT FK_ITEM_PEDIDO FOREIGN KEY (NUMERO_PED) REFERENCES PEDIDO (NUMERO);

ALTER TABLE ITEM_PRODUTO
ADD CONSTRAINT FK_ITEM_PRODUTO FOREIGN KEY (CODIGO_PRO) REFERENCES PRODUTO (CODIGO);

